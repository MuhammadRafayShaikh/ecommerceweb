@{
    ViewData["Title"] = "Premium ladies Suits";
    Layout = "_Layout";
}
@model E_Commerce.Models.HomeViewModel
@section Styles {
    <link rel="stylesheet" href="~/user/index.css" asp-append-version="true">
}

<!-- Hero Section -->
<section class="hero">
    <div class="hero-content">
        <div class="hero-text">
            <h1>Elegance Stitched in Every <span>Suit</span></h1>
            <p>Discover our exclusive collection of handcrafted ladies suits, blending traditional craftsmanship with contemporary designs for the modern woman.</p>
            <a asp-controller="Home" asp-action="@ViewData["shopNowLink"]" class="cta-button">Shop Now</a>
        </div>
        <div class="hero-image">
            <div class="floating-suit"></div>
        </div>
    </div>
</section>

<!-- Categories Section -->
<section class="categories" id="categories">
    <div class="section-title">
        <h2>Our Collections</h2>
        <p>Explore our handpicked categories, each crafted to perfection for different occasions and styles.</p>
    </div>

    <div class="categories-grid">
        @if (Model?.Categories != null && Model.Categories.Any())
        {
            foreach (var category in Model.Categories)
            {
                <a asp-controller="Home" asp-action="Collections" asp-route-id="@category.Id" class="category-link">
                    <div class="category-card">
                        <div class="category-img" style="background-image: url('/CategoryImages/@category.Image');"></div>
                        <div class="category-content">
                            <h3>@category.Name</h3>
                            <p>@category.Description</p>
                        </div>
                    </div>
                </a>
            }
        }



    </div>
</section>

<!-- Featured Products -->
<section class="featured-products" id="featured">
    <div class="products-container">
        <div class="section-title">
            <h2>Featured Suits</h2>
            <p>Our best-selling designs loved by thousands of women across the country.</p>
        </div>

        <div class="products-grid">
            @if (Model?.BestSelling != null)
            {
                <a style="text-decoration: none;" asp-controller="Home" asp-action="Featured" asp-route-highlightedProduct="bestseller">
                    <div class="product-card">
                        <div class="product-img" style="background-image: url('/ProductImages/@Model.BestSelling.ProductColors.SelectMany(x => x.Images).Select(x => x.ImagePath).FirstOrDefault()');">
                            <div class="product-badge">Bestseller</div>
                        </div>
                        <div class="product-content">
                            <h3>@Model.BestSelling.Name</h3>
                            <div class="product-rating">
                                @{
                                    var avgRating1 = Model.BestSelling.AverageRating as double? ?? 4.5;
                                    var fullStars1 = (int)Math.Floor(avgRating1);
                                    var hasHalfStar1 = avgRating1 - fullStars1 >= 0.5;
                                }
                                @for (int i = 1; i <= 5; i++)
                                {
                                    if (i <= fullStars1)
                                    {
                                        <i class="fas fa-star"></i>
                                    }
                                    else if (i == fullStars1 + 1 && hasHalfStar1)
                                    {
                                        <i class="fas fa-star-half-alt"></i>
                                    }
                                    else
                                    {
                                        <i class="far fa-star"></i>
                                    }
                                }
                            </div>
                            @{
                                decimal bestSellingPrice = Math.Truncate(Model.BestSelling.Price);
                            }
                            <div class="product-price">₹@bestSellingPrice</div>
                        </div>
                    </div>
                </a>
            }

            @if (Model?.NewProduct != null)
            {
                <a style="text-decoration: none;" asp-controller="Home" asp-action="Featured" asp-route-highlightedProduct="new">
                    <div class="product-card">
                        <div class="product-img"
                             style="background-image: url('/ProductImages/@(
                             Model.NewProduct.ProductColors?
                             .SelectMany(x => x.Images)
                             .Select(x => x.ImagePath)
                             .FirstOrDefault() ?? "no-image.png"
                                                                    )');">
                            <div class="product-badge">New</div>
                        </div>

                        <div class="product-content">
                            <h3>@Model.NewProduct.Name</h3>
                            <div class="product-rating">
                                @{
                                    var avgRating1 = Model.NewProduct.AverageRating as double? ?? 4.5;
                                    var fullStars1 = (int)Math.Floor(avgRating1);
                                    var hasHalfStar1 = avgRating1 - fullStars1 >= 0.5;
                                }
                                @for (int i = 1; i <= 5; i++)
                                {
                                    if (i <= fullStars1)
                                    {
                                        <i class="fas fa-star"></i>
                                    }
                                    else if (i == fullStars1 + 1 && hasHalfStar1)
                                    {
                                        <i class="fas fa-star-half-alt"></i>
                                    }
                                    else
                                    {
                                        <i class="far fa-star"></i>
                                    }
                                }
                            </div>
                            @{
                                decimal newProductPrice = Math.Truncate(Model.NewProduct.Price);
                            }
                            <div class="product-price">₹@newProductPrice</div>
                        </div>
                    </div>
                </a>
            }


            @if (Model?.AttractiveDiscount != null)
            {
                <a style="text-decoration: none;" asp-controller="Home" asp-action="Featured" asp-route-highlightedProduct="discount">
                    <div class="product-card">
                        <div class="product-img"
                             style="background-image: url('/ProductImages/@(Model.AttractiveDiscount.ProductImage ?? "no-image.png")');">
                            <div class="product-badge">
                                Sale @Model.AttractiveDiscount.DiscountText
                            </div>
                        </div>

                        <div class="product-content">
                            <h3>@Model.AttractiveDiscount.Product?.Name</h3>
                            <div class="product-rating">
                                @{
                                    var avgRating1 = Model.AttractiveDiscount.AvgRating as double? ?? 4.5;
                                    var fullStars1 = (int)Math.Floor(avgRating1);
                                    var hasHalfStar1 = avgRating1 - fullStars1 >= 0.5;
                                }
                                @for (int i = 1; i <= 5; i++)
                                {
                                    if (i <= fullStars1)
                                    {
                                        <i class="fas fa-star"></i>
                                    }
                                    else if (i == fullStars1 + 1 && hasHalfStar1)
                                    {
                                        <i class="fas fa-star-half-alt"></i>
                                    }
                                    else
                                    {
                                        <i class="far fa-star"></i>
                                    }
                                }
                            </div>
                            <div class="product-price">
                                @{
                                    decimal discountedPrice = Math.Truncate(Model.AttractiveDiscount.DiscountedPrice);
                                    decimal originalPrice = Math.Truncate(Model.AttractiveDiscount.OriginalPrice);
                                }
                                ₹@discountedPrice                                
                                <del>₹@originalPrice</del>
                            </div>
                        </div>
                    </div>
                </a>
            }

            @if (Model?.LimitedProduct != null)
            {
                <a style="text-decoration: none;" asp-controller="Home" asp-action="Featured" asp-route-highlightedProduct="limited">
                    <div class="product-card">
                        <div class="product-img" style="background-image: url('/ProductImages/@Model.LimitedProduct.Product.ProductColors.SelectMany(x => x.Images).Select(x => x.ImagePath).FirstOrDefault()');">
                            <div class="product-badge">Limited</div>
                        </div>
                        <div class="product-content">
                            <h3>@Model.LimitedProduct.Product.Name</h3>
                            <div class="product-rating">
                                @{
                                    var avgRating1 = Model.LimitedProduct.Product.AverageRating as double? ?? 4.5;
                                    var fullStars1 = (int)Math.Floor(avgRating1);
                                    var hasHalfStar1 = avgRating1 - fullStars1 >= 0.5;
                                }
                                @for (int i = 1; i <= 5; i++)
                                {
                                    if (i <= fullStars1)
                                    {
                                        <i class="fas fa-star"></i>
                                    }
                                    else if (i == fullStars1 + 1 && hasHalfStar1)
                                    {
                                        <i class="fas fa-star-half-alt"></i>
                                    }
                                    else
                                    {
                                        <i class="far fa-star"></i>
                                    }
                                }
                            </div>
                            <div class="product-price">₹@Model.LimitedProduct.Product.Price</div>
                        </div>
                    </div>
                </a>
            }
        </div>
    </div>
</section>

<!-- Newsletter -->
<section class="newsletter">
    <div class="newsletter-container">
        <h2>Stay Updated</h2>
        <p>Subscribe to our newsletter and be the first to know about new collections, exclusive offers, and style tips.</p>
        <form class="newsletter-form">
            <input type="email" placeholder="Enter your email address" required>
            <button type="submit">Subscribe</button>
        </form>
    </div>
</section>

@section Scripts {
    <script src="~/user/index.js" asp-append-version="true"></script>
}